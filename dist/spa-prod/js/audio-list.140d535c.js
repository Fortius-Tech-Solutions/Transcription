"use strict";(globalThis["webpackChunkTranscription"]=globalThis["webpackChunkTranscription"]||[]).push([[343],{8147:(a,l,e)=>{e.r(l),e.d(l,{default:()=>R});e(9665);var o=e(9835),i=e(499),s=e(6970),n=(e(826),e(4016)),t=e(8853),d=e(8339),u=e(5531),c=e(6950),r=e(9120),m=e(4170),_=e(3703);e(3878),e(3129);const p={class:"q-pa-md main-wrapper"},v={class:"datefilter_box"},f=(0,o._)("div",{class:"audio_list_head"},[(0,o._)("div",{class:"col1"},[(0,o._)("div",{class:"td_col1"},"Audio Name"),(0,o._)("div",{class:"td_col2"},"Patient Name"),(0,o._)("div",{class:"td_col3"},"Hospital Name")]),(0,o._)("div",{class:"col2"},"Action")],-1),g={class:"audio_list_body"},w={class:"audio_list_item"},h={class:"audio_list_col1"},y={class:"audioplayer_col"},b=(0,o._)("span",{class:"play_icon"},[(0,o._)("i",{class:"las la-play"})],-1),k={class:"audio_info"},Z={class:"audio_heading"},C={class:"audio_meta"},D={class:"audio_meta_list"},q={class:"audo_patient_name"},L={class:"audo_hospital_name"},H={class:"audio_list_action"},S={class:"text-center"},U=(0,o._)("i",{class:"las la-exclamation-triangle"},null,-1),P=(0,o._)("h5",null,"Data Not Found",-1),W={class:"row justify-center q-my-md"},Y={style:{display:"none"}},j={__name:"audioList",setup(a){const l=(0,o.RC)((()=>e.e(979).then(e.bind(e,7979)))),j=(0,d.tv)(),x=(0,d.yj)(),T=(0,i.iH)(!1),A=(0,i.iH)([]),Q=(0,i.iH)(!1),V=(0,i.iH)(null),z=(0,u.b)();c.Z.show({spinner:r.Z,message:"Loading..."});const E=(0,o.Fl)((()=>z.getAudioList)),M=(0,i.iH)(null),B=(0,i.iH)(1),I=(0,i.iH)(6),R=(0,i.iH)(!0);function F(){const a={from_date:V.value?.from,to_date:V.value?.to,limit:I.value,page:B.value,userId:x.params.slug.split("/")[0],statusId:x.params.slug.split("/")[1]};return z.fetchAudioList(a)}function N(a,l){F().then((a=>{a.success&&a.data.data.length>0?(B.value=B.value+1,l()):(R.value=!1,l(!0))})).catch((a=>{l(!0)})).finally((()=>{c.Z.hide()}))}function O(a){z.draft=a.draft,z.data=a,_.Z.set("data",a),j.push({name:"write-script",params:{slug:a.id}})}function $(a){c.Z.show({spinner:r.Z,message:"Loading..."}),n.Z.post(n.Z.resolveApiUrl(t.jU.SAVE,{id:a.id}),{status_id:"4"}).then((l=>{E.value.forEach(((l,e,o)=>{l.id==a.id&&(l.name="Published")}))})).catch((a=>{console.log(a)})).finally((()=>{c.Z.hide()}))}async function J(a){c.Z.show({message:"Loading...",spinner:r.Z}),T.value=!0,G(a)}function K(a,l=""){var e="<html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'><head><meta charset='utf-8'><title>Export HTML to Word Document with JavaScript</title></head><body>",o="</body></html>",i=e+document.getElementById(a).innerHTML+o,s=new Blob(["\ufeff",i],{type:"application/msword"}),n="data:application/vnd.ms-word;charset=utf-8,"+encodeURIComponent(i);l=l?l+".doc":"document.doc";var t=document.createElement("a");document.body.appendChild(t),navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(s,l):(t.href=n,t.download=l,t.click()),document.body.removeChild(t)}async function G(a){A.value=a,setTimeout((()=>{K("downloadPDF",`${A.value.patient_name}_${m.ZP.formatDate(A.value.date_of_service,"DD-MM-YYYY")}`),c.Z.hide()}),4e3)}function X(){c.Z.show({spinner:r.Z,message:"Loading..."}),B.value=1,R.value=!0,z.audioList=[],N()}function aa(){c.Z.show({spinner:r.Z,message:"Loading..."}),V.value=null,z.audioList=[],B.value=1,R.value=!0,M.value.reset(),M.value.resume(),M.value.trigger()}return(0,d.iS)(((a,l,e)=>{console.log("leave"),z.resetList(),e()})),(a,e)=>{const n=(0,o.up)("q-btn"),t=(0,o.up)("q-card"),d=(0,o.up)("q-spinner-dots"),u=(0,o.up)("q-infinite-scroll"),c=(0,o.up)("q-date"),r=(0,o.up)("q-dialog"),_=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",p,[(0,o._)("div",v,[(0,o.Wm)(n,{color:"primary",onClick:e[0]||(e[0]=a=>Q.value=!0),label:V.value?.from?V.value.from+" to "+V.value.to:V.value??"Select Date"},null,8,["label"]),V.value?((0,o.wg)(),(0,o.j4)(n,{key:0,onClick:aa,icon:"la la-times"})):(0,o.kq)("",!0)]),(0,o.Wm)(u,{onLoad:N,offset:250,"scroll-target":"body",ref_key:"scrollList",ref:M},{loading:(0,o.w5)((()=>[(0,o._)("div",W,[(0,o.Wm)(d,{color:"primary",size:"40px"})])])),default:(0,o.w5)((()=>[0!==(0,i.SU)(E).length?((0,o.wg)(),(0,o.j4)(t,{key:0,class:"q-pa-lg"},{default:(0,o.w5)((()=>[f,(0,o._)("div",g,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)((0,i.SU)(E),(a=>((0,o.wg)(),(0,o.iD)("div",{class:"audio_list_bg caption",key:a},[(0,o._)("div",w,[(0,o._)("div",h,[(0,o._)("div",y,[b,(0,o._)("div",k,[(0,o._)("p",Z,(0,s.zw)(a.audio_name),1),(0,o._)("div",C,[(0,o._)("ul",D,[(0,o._)("li",null,[(0,o.Uk)(" Duration: "),(0,o._)("b",null,(0,s.zw)(a.audio_duration),1)]),(0,o._)("li",null,[(0,o.Uk)(" Created at: "),(0,o._)("b",null,(0,s.zw)((0,i.SU)(m.ZP).formatDate(a.created_at,"DD-MM-YYYY")),1)])])])]),(0,o._)("div",q,[(0,o._)("p",null,[(0,o._)("b",null,(0,s.zw)(a.patient_name),1)])]),(0,o._)("div",L,[(0,o._)("p",null,(0,s.zw)(a.hospital_name),1)])])]),(0,o._)("div",H,["Published"==a.name?((0,o.wg)(),(0,o.j4)(n,{key:0,title:"Report Download",round:"",color:"primary",icon:"las la-download",class:"q-ml-sm",padding:"sm",onClick:l=>J(a)},null,8,["onClick"])):(0,o.kq)("",!0),(0,o.Wm)(n,{round:"",color:"blue",icon:"las la-download",title:"Audio Download",class:"q-ml-sm",padding:"sm",href:a.audio_filepath,download:""},null,8,["href"]),"Confirmed"==a.name?((0,o.wg)(),(0,o.j4)(n,{key:1,color:"green",label:"Publish",class:"q-ml-sm",onClick:l=>$(a)},null,8,["onClick"])):(0,o.kq)("",!0),(0,o.Wm)(n,{round:"",color:"secondary",icon:"las la-edit",class:"q-ml-sm",padding:"sm",disable:"Pending"!==a.name,onClick:l=>O(a)},null,8,["disable","onClick"])])])])))),128))])])),_:1})):R.value?(0,o.kq)("",!0):((0,o.wg)(),(0,o.j4)(t,{key:1,class:"q-pa-lg"},{default:(0,o.w5)((()=>[(0,o._)("div",S,[(0,o.Wm)(n,{class:"not_found_icon",outline:"",color:"primary"},{default:(0,o.w5)((()=>[U])),_:1}),P])])),_:1}))])),_:1},512)]),(0,o._)("div",Y,[T.value?((0,o.wg)(),(0,o.j4)((0,i.SU)(l),{key:0,items:A.value,id:"downloadPDF"},null,8,["items"])):(0,o.kq)("",!0)]),(0,o.Wm)(r,{modelValue:Q.value,"onUpdate:modelValue":e[2]||(e[2]=a=>Q.value=a)},{default:(0,o.w5)((()=>[(0,o.Wm)(c,{modelValue:V.value,"onUpdate:modelValue":e[1]||(e[1]=a=>V.value=a),range:""},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(n,{label:"Submit",onClick:X,type:"submit",color:"primary"},null,512),[[_]])])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])],64)}}};var x=e(8879),T=e(6870),A=e(4458),Q=e(7501),V=e(3706),z=e(6711),E=e(2146),M=e(9984),B=e.n(M);const I=j,R=I;B()(j,"components",{QBtn:x.Z,QInfiniteScroll:T.Z,QCard:A.Z,QSpinnerDots:Q.Z,QDialog:V.Z,QDate:z.Z}),B()(j,"directives",{ClosePopup:E.Z})}}]);