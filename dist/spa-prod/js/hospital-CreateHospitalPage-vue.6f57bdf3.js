"use strict";(globalThis["webpackChunkTranscription"]=globalThis["webpackChunkTranscription"]||[]).push([[99],{2235:(e,a,l)=>{l.r(a),l.d(a,{default:()=>O});l(9665);var s=l(9835),r=l(6970),o=l(499),d=l(8853),t=l(4059),i=l(9587),u=l(6950),n=l(9120),c=(l(796),l(2057)),m=l(8339),p=l(4016);l(6928);const v={class:"home_user_header"},h={class:"comman-title"},f={class:"q-pa-md main-wrapper"},g={class:"bg-box"},_=(0,s._)("label",{for:""}," Name",-1),b={class:"q-mt-lg"},w=(0,s._)("label",{for:""},"City",-1),y={class:"q-mt-lg"},k=(0,s._)("label",{for:""},"Address",-1),Z={class:"row"},H={class:"col-md-3 col-sm-12 col-12 edit-field mob-edit-pa q-mt-xl"},q={class:"uploder_box"},U={key:0,class:"uploaded_img"},C=["src"],S={class:"col-md-3 col-sm-12 col-12 edit-field mob-edit-pa q-mt-xl"},W={class:"uploder_box"},x={key:0,class:"uploaded_img"},V=["src"],A={class:"col-md-3 col-sm-12 col-12 edit-field mob-edit-pa q-mt-xl"},F={class:"uploder_box"},j={key:0,class:"uploaded_img"},Q=["src"],D={class:"form_comon_btn q-mt-md q-mr-md q-mb-md"},L={__name:"CreateHospitalPage",setup(e){(0,s.RC)((()=>Promise.all([l.e(736),l.e(64)]).then(l.bind(l,7390))));const a=(0,t.L)(),L=(0,m.tv)(),N=(0,m.yj)(),T=(0,o.iH)(!1),{errors:E,serverValidationError:I}=(0,c.Z)(),M=((0,o.iH)(null),(0,o.iH)([]),(0,o.iH)(""),(0,o.iH)(12),(0,o.iH)("")),P=(0,o.iH)(""),R=(0,o.iH)(""),z=(0,o.iH)(""),B=(0,o.iH)(""),O=(0,o.iH)("");const G=(e,a)=>{console.log(e),e.forEach((e=>{const l=new FileReader;l.onload=e=>{"header"==a?z.value=e.target.result:"footer"==a?B.value=e.target.result:"water-mark"==a&&(O.value=e.target.result)},l.readAsDataURL(e)}))},J=e=>{"header"==e?z.value="":"footer"==e?B.value="":"water-mark"==e&&(O.value="")},K=(0,o.iH)(null),X=(0,o.iH)(null);function Y(){history.go(-1)}async function $(){u.Z.show({message:"Loading...",spinner:n.Z});const e=new FormData;if(e.append("name",M.value),e.append("address",R.value),e.append("city",P.value),z.value?.startsWith("https://"))e.append("header_file",z.value);else if(z.value){const a=await fetch(z.value),l=await a.blob(),s=new File([l],"header");e.append("header_file",s,"header")}else e.append("header_file","");if(B.value?.startsWith("https://"))e.append("footer_file",B.value);else if(B.value){const a=await fetch(B.value),l=await a.blob(),s=new File([l],"footer");e.append("footer_file",s,"footer")}else e.append("footer_file","");if(O.value?.startsWith("https://"))e.append("water_mark",O.value);else if(O.value){const a=await fetch(O.value),l=await a.blob(),s=new File([l],"waterMark.png");e.append("water_mark",s,"waterMark.png")}else e.append("water_mark","");"edit-hospital"==N.name?a.updateHospital(e,X.value).then((e=>{1==e.success?(i["default"].success(e.message?e.message:"Hospital Edited Successfully !"),L.push({name:"hospital-dashboard"}),u.Z.hide()):0==e.success&&(i["default"].error(e.message),u.Z.hide())})).finally((()=>{u.Z.hide()})):a.saveNewHospital(e).then((e=>{1==e.success?(i["default"].success(e.message?e.message:"Hospital Created Successfully !"),L.push({name:"hospital-dashboard"}),u.Z.hide()):0==e.success&&(i["default"].error(e.message),u.Z.hide())})).finally((()=>{u.Z.hide()}))}return"edit-hospital"==N.name&&(u.Z.show({message:"Loading...",spinner:n.Z}),K.value=N.params.slug,p.Z.get(p.Z.resolveApiUrl(d.Lj.SHOW,{id:K.value})).then((e=>{1==e.success?(X.value=e.data.id,M.value=e.data.name,R.value=e.data.address,P.value=e.data.city,z.value=e.data.header_file,B.value=e.data.footer_file,O.value=e.data.water_mark,u.Z.hide()):0==e.success&&(i["default"].error(e.message),u.Z.hide(),E.value=e.errors)})).catch((e=>{e.response&&(E.value=e.response.data.errors),console.log(e),u.Z.hide()})).finally((()=>{T.value=!0,u.Z.hide()}))),(0,s.bv)((()=>{"edit-hospital"!==N.name&&(T.value=!0)})),(e,a)=>{const l=(0,s.up)("q-input"),d=(0,s.up)("q-btn"),t=(0,s.up)("q-uploader"),i=(0,s.up)("q-form");return(0,s.wg)(),(0,s.j4)(i,{onSubmit:$},{default:(0,s.w5)((()=>[(0,s._)("div",v,[(0,s._)("h3",h,(0,r.zw)(K.value?"Update":"Create")+" Hospital",1)]),(0,s._)("div",f,[(0,s._)("div",g,[_,(0,s.Wm)(l,{outlined:"",modelValue:M.value,"onUpdate:modelValue":a[0]||(a[0]=e=>M.value=e),dense:e.dense,placeholder:"Please Enter Hospital Name",class:"create-user-field-box",rules:[a=>e.required(a,"Name")],error:(0,o.SU)(E).length>0,"error-message":(0,o.SU)(I)((0,o.SU)(E),"Name")},null,8,["modelValue","dense","rules","error","error-message"]),(0,s._)("div",b,[w,(0,s.Wm)(l,{outlined:"",modelValue:P.value,"onUpdate:modelValue":a[1]||(a[1]=e=>P.value=e),dense:e.dense,placeholder:"City",class:"create-user-field-box",rules:[a=>e.required(a,"City")],error:(0,o.SU)(E).length>0,"error-message":(0,o.SU)(I)((0,o.SU)(E),"City")},null,8,["modelValue","dense","rules","error","error-message"])]),(0,s._)("div",y,[k,(0,s.Wm)(l,{outlined:"",modelValue:R.value,"onUpdate:modelValue":a[2]||(a[2]=e=>R.value=e),dense:e.dense,placeholder:"Address",class:"create-user-field-box",rules:[a=>e.required(a,"Address")],error:(0,o.SU)(E).length>0,"error-message":(0,o.SU)(I)((0,o.SU)(E),"Address")},null,8,["modelValue","dense","rules","error","error-message"])]),(0,s._)("div",Z,[(0,s._)("div",H,[(0,s._)("div",q,[z.value?((0,s.wg)(),(0,s.iD)("div",U,[(0,s.Wm)(d,{color:"primary",rounded:"",icon:"las la-times",class:"close",onClick:a[3]||(a[3]=e=>J("header"))}),(0,s._)("img",{src:z.value},null,8,C)])):((0,s.wg)(),(0,s.j4)(t,{key:1,color:"teal",label:"Header Image",url:"",onAdded:a[4]||(a[4]=e=>G(e,"header"))}))])]),(0,s._)("div",S,[(0,s._)("div",W,[B.value?((0,s.wg)(),(0,s.iD)("div",x,[(0,s.Wm)(d,{color:"primary",rounded:"",icon:"las la-times",class:"close",onClick:a[5]||(a[5]=e=>J("footer"))}),(0,s._)("img",{src:B.value},null,8,V)])):((0,s.wg)(),(0,s.j4)(t,{key:1,color:"teal",label:"Footer Image",url:"",onAdded:a[6]||(a[6]=e=>G(e,"footer"))}))])]),(0,s._)("div",A,[(0,s._)("div",F,[O.value?((0,s.wg)(),(0,s.iD)("div",j,[(0,s.Wm)(d,{color:"primary",rounded:"",icon:"las la-times",class:"close",onClick:a[7]||(a[7]=e=>J("water-mark"))}),(0,s._)("img",{src:O.value},null,8,Q)])):((0,s.wg)(),(0,s.j4)(t,{key:1,color:"teal",label:"Water Mark Image",url:"",onAdded:a[8]||(a[8]=e=>G(e,"water-mark"))}))])])])]),(0,s._)("div",D,[(0,s.Wm)(d,{outline:"",color:"primary",label:"Cancel",onClick:Y}),(0,s.Wm)(d,{color:"primary",type:"submit",label:"Submit",class:"q-ml-md"})])])])),_:1})}}};var N=l(8326),T=l(6611),E=l(8879),I=l(4343),M=l(1463),P=l(8149),R=l(9984),z=l.n(R);const B=L,O=B;z()(L,"components",{QForm:N.Z,QInput:T.Z,QBtn:E.Z,QUploader:I.Z,QTable:M.Z,QField:P.Z})}}]);