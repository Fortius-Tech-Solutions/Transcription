(globalThis["webpackChunkTranscription"]=globalThis["webpackChunkTranscription"]||[]).push([[620],{4391:(e,l,a)=>{"use strict";a.r(l),a.d(l,{default:()=>ae});a(9665);var s=a(9835),r=a(1957),t=a(6970),i=a(499),o=a(205),n=a.n(o),m=a(796),d=a(5054),u=a(8853),c=a(4577),p=a(9587),v=a(6950),g=a(9120),b=a(1910),h=a(2057),f=a(8339),_=a(4016),q=a(6928);const U={class:"container"},Z={class:"profile-sec q-mb-md"},w={class:"home_user_header"},y={class:"comman-title"},S={class:"profile-card"},H={class:"text-center"},V={class:"profile-head edit-pro-head mob-pro-head"},k={class:"profile-avtar"},C=["src"],W={key:1,src:n(),alt:""},x={class:"avtar-edit-icon"},F=["accept"],T={class:"row q-col-gutter-lg q-mt-sm edit-avtar-field"},L={class:"col-md-6 col-sm-12 col-12 edit-field mob-edit-pa"},Q=(0,s._)("label",{class:"lable-text q-mb-sm q-ml-sm q-mr-sm"},"Select User Type",-1),$={class:"col-md-6 col-sm-12 col-12 edit-field mob-edit-pa"},D=(0,s._)("label",{class:"lable-text q-mb-sm q-ml-sm q-mr-sm"},"First Name",-1),E={class:"col-md-6 col-sm-12 col-12 edit-field mob-edit-pa"},N=(0,s._)("label",{class:"lable-text q-mb-sm q-ml-sm q-mr-sm"},"Last Name",-1),P={class:"col-md-6 col-sm-12 col-12 edit-field mob-edit-pa"},A=(0,s._)("label",{class:"lable-text q-mb-sm q-ml-sm q-mr-sm"},"Email",-1),R={key:0,class:"col-md-6 col-sm-12 col-12 edit-field mob-edit-pa mob_digit"},z={class:"pass-feild"},j=(0,s._)("label",{class:"lable-text q-mb-sm q-ml-sm q-mr-sm",for:""},"Password ",-1),I={class:"text-right q-pt-lg mob-action-btn"},M={__name:"CreateUserPage",setup(e){(0,s.RC)((()=>Promise.all([a.e(736),a.e(64)]).then(a.bind(a,2742))));const{errors:l,serverValidationError:o}=(0,h.Z)(),n=(0,c.H)();n.fetchUserTypeList();const M=(0,f.tv)(),B=(0,f.yj)(),G=(0,i.iH)(!1),O=(0,q.t)(),J=((0,s.Fl)((()=>O.isSuperUser)),(0,s.Fl)((()=>n.getUserType))),K=((0,i.iH)(null),(0,i.iH)([]),(0,i.iH)(""),(0,i.iH)("a-z,A-Z,0-9,#"),(0,i.iH)(12),(0,i.iH)("")),X=(0,i.iH)(""),Y=(0,i.iH)(""),ee=(0,i.iH)(""),le=(0,i.iH)("");function ae(){const e=new b(/[A-Z]{1}/gm).gen(),l=new b(/[a-z]{3,5}/gm).gen(),a=new b(/[@#$%^&*!]{1}/gm).gen(),s=new b(/[0-9]{3,5}/gm).gen();le.value=e+l+a+s,(0,d.Z)(le.value)}const se=(0,i.iH)(null),re=(0,i.iH)(null),te=((0,i.iH)([]),(0,i.iH)("")),ie=(0,i.iH)("");function oe(){te.value.click()}async function ne(e){v.Z.show({spinner:g.Z,message:"Loading..."});const l=e.target.files[0],a=new FileReader;a.onloadend=()=>{ie.value=a.result,v.Z.hide()},a.readAsDataURL(l)}function me(){history.go(-1)}async function de(){v.Z.show({message:"Loading...",spinner:g.Z});const e=new FormData;if(e.append("user_type_id",K.value.value),e.append("first_name",X.value),e.append("last_name",Y.value),e.append("email",ee.value),le.value&&e.append("password",le.value),ie.value?.startsWith("https://"))e.append("avtar",ie.value);else if(ie.value){const l=await fetch(ie.value),a=await l.blob(),s=new File([a],`image${(0,m.Z)()}.png`);e.append("avtar",s,`image${(0,m.Z)()}.png`)}"edit-user"==B.name?n.updateUser(e,re.value).then((e=>{1==e.success?(p["default"].success(e.message?e.message:"User Edited Successfully !"),M.push({name:"user-dashboard"}),v.Z.hide()):0==e.success&&(p["default"].error(e.message),v.Z.hide())})).finally((()=>{v.Z.hide()})):n.saveNewUser(e).then((e=>{1==e.success?(p["default"].success(e.message?e.message:"User Created Successfully !"),M.push({name:"user-dashboard"}),v.Z.hide()):(console.log(e),l.value=e.errors)})).catch((e=>{e.response&&(l.value=e.response.data.errors)})).finally((()=>{v.Z.hide()}))}return"edit-user"==B.name&&(v.Z.show({message:"Loading...",spinner:g.Z}),se.value=B.params.slug,_.Z.get(_.Z.resolveApiUrl(u.xR.SHOW,{id:se.value})).then((e=>{1==e.success?(re.value=e.data[0].id,K.value={label:e.data[0].usertype.name,value:e.data[0].usertype.id},X.value=e.data[0].first_name,Y.value=e.data[0].last_name,ee.value=e.data[0].email,ie.value=e.data[0].avtar,v.Z.hide()):0==e.success&&(p["default"].error(e.message),v.Z.hide())})).catch((e=>{console.log(e),v.Z.hide()})).finally((()=>{G.value=!0,v.Z.hide()}))),(0,s.bv)((()=>{"edit-user"!==B.name&&(G.value=!0)})),(e,a)=>{const n=(0,s.up)("q-btn"),m=(0,s.up)("q-select"),d=(0,s.up)("q-input"),u=(0,s.up)("q-form");return(0,s.wg)(),(0,s.j4)(u,{onSubmit:a[6]||(a[6]=(0,r.iM)((e=>de()),["prevent"]))},{default:(0,s.w5)((()=>[(0,s._)("div",U,[(0,s._)("section",Z,[(0,s._)("div",w,[(0,s._)("h3",y,(0,t.zw)(se.value?"Update":"Create")+" User",1)]),(0,s._)("div",S,[(0,s._)("div",H,[(0,s._)("div",V,[(0,s._)("div",k,[ie.value?((0,s.wg)(),(0,s.iD)("img",{key:0,src:ie.value,alt:"user"},null,8,C)):((0,s.wg)(),(0,s.iD)("img",W))]),(0,s._)("div",x,[(0,s._)("input",{style:{display:"none"},ref_key:"imgInput",ref:te,type:"file",name:"image",accept:e.accept,onChange:ne},null,40,F),(0,s.Wm)(n,{color:"primary",icon:"las la-pen",class:"edit-pro-btn-avtar",onClick:(0,r.iM)(oe,["prevent"])},null,8,["onClick"])])])]),(0,s._)("div",T,[(0,s._)("div",L,[Q,(0,s.Wm)(m,{outlined:"","hide-bottom-space":"",dense:e.dense,class:"q-ml-sm q-mr-sm",modelValue:K.value,"onUpdate:modelValue":a[0]||(a[0]=e=>K.value=e),options:(0,i.SU)(J),error:(0,i.SU)(l).length>0,"error-message":(0,i.SU)(o)((0,i.SU)(l),"user_type_id")},null,8,["dense","modelValue","options","error","error-message"])]),(0,s._)("div",$,[D,(0,s.Wm)(d,{outlined:"","hide-bottom-space":"",modelValue:X.value,"onUpdate:modelValue":a[1]||(a[1]=e=>X.value=e),dense:e.dense,class:"q-ml-sm q-mr-sm",rules:[l=>e.required(l,"First Name")],error:(0,i.SU)(l).length>0,"error-message":(0,i.SU)(o)((0,i.SU)(l),"first_name")},null,8,["modelValue","dense","rules","error","error-message"])]),(0,s._)("div",E,[N,(0,s.Wm)(d,{outlined:"","hide-bottom-space":"",modelValue:Y.value,"onUpdate:modelValue":a[2]||(a[2]=e=>Y.value=e),dense:e.dense,placeholder:e.$q.lang.user.edit_profile.name.placeHolder,rules:[l=>e.required(l,"Last Name")],error:(0,i.SU)(l).length>0,"error-message":(0,i.SU)(o)((0,i.SU)(l),"last_name"),class:"q-ml-sm q-mr-sm"},null,8,["modelValue","dense","placeholder","rules","error","error-message"])]),(0,s._)("div",P,[A,(0,s.Wm)(d,{outlined:"","hide-bottom-space":"",modelValue:ee.value,"onUpdate:modelValue":a[3]||(a[3]=e=>ee.value=e),dense:e.dense,class:"q-ml-sm q-mr-sm",rules:[l=>e.required(l,"Email"),l=>e.isEmail(l)],error:(0,i.SU)(l).length>0,"error-message":(0,i.SU)(o)((0,i.SU)(l),"email")},null,8,["modelValue","dense","rules","error","error-message"])]),se.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",R,[(0,s._)("div",z,[j,(0,s.Wm)(n,{label:"Generate",onClick:a[4]||(a[4]=e=>ae())})]),(0,s.Wm)(d,{outlined:"","hide-bottom-space":"",modelValue:le.value,"onUpdate:modelValue":a[5]||(a[5]=e=>le.value=e),dense:e.dense,rules:[l=>e.required(l,"Password"),l=>e.validatePassword(l)],error:(0,i.SU)(l).length>0,"error-message":(0,i.SU)(o)((0,i.SU)(l),"password"),class:"q-ml-sm q-mr-sm"},null,8,["modelValue","dense","rules","error","error-message"])]))]),(0,s._)("div",I,[(0,s.Wm)(n,{outline:"",onClick:me,color:"primary",label:e.$q.lang.user.edit_profile.cancel_btn,class:"edit-pro-btn"},null,8,["label"]),(0,s.Wm)(n,{color:"primary",label:e.$q.lang.user.edit_profile.submit_btn,type:"submit",class:"edit-pro-btn q-ml-sm"},null,8,["label"])])])])])])),_:1})}}};var B=a(8326),G=a(8879),O=a(2259),J=a(6611),K=a(1463),X=a(8149),Y=a(9984),ee=a.n(Y);const le=M,ae=le;ee()(M,"components",{QForm:B.Z,QBtn:G.Z,QSelect:O.Z,QInput:J.Z,QTable:K.Z,QField:X.Z})},205:(e,l,a)=>{e.exports=a.p+"img/user-avtart-img.f9e2707e.png"}}]);