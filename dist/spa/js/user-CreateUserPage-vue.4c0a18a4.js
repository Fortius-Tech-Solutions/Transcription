(globalThis["webpackChunkTranscription"]=globalThis["webpackChunkTranscription"]||[]).push([[620],{4391:(e,l,a)=>{"use strict";a.r(l),a.d(l,{default:()=>le});a(9665);var s=a(9835),r=a(1957),t=a(6970),i=a(499),o=a(205),n=a.n(o),d=a(5054),m=a(8853),u=a(4577),c=a(9587),p=a(6950),v=a(9120),g=a(1910),b=a(2057),h=a(8339),_=a(4016),f=a(6928);const q={class:"container"},U={class:"profile-sec q-mb-md"},Z={class:"home_user_header"},w={class:"comman-title"},y={class:"profile-card"},S={class:"text-center"},H={class:"profile-head edit-pro-head mob-pro-head"},V={class:"profile-avtar"},k=["src"],C={key:1,src:n(),alt:""},W={class:"avtar-edit-icon"},F=["accept"],x={class:"row q-col-gutter-lg q-mt-sm edit-avtar-field"},T={class:"col-md-6 col-sm-12 col-12 edit-field mob-edit-pa"},L=(0,s._)("label",{class:"lable-text q-mb-sm q-ml-sm q-mr-sm"},"Select User Type",-1),E={class:"col-md-6 col-sm-12 col-12 edit-field mob-edit-pa"},Q=(0,s._)("label",{class:"lable-text q-mb-sm q-ml-sm q-mr-sm"},"First Name",-1),D={class:"col-md-6 col-sm-12 col-12 edit-field mob-edit-pa"},N=(0,s._)("label",{class:"lable-text q-mb-sm q-ml-sm q-mr-sm"},"Last Name",-1),P={class:"col-md-6 col-sm-12 col-12 edit-field mob-edit-pa"},A=(0,s._)("label",{class:"lable-text q-mb-sm q-ml-sm q-mr-sm"},"Email",-1),R={key:0,class:"col-md-6 col-sm-12 col-12 edit-field mob-edit-pa mob_digit"},$={class:"pass-feild"},z=(0,s._)("label",{for:""},"Password ",-1),j={class:"text-right q-pt-lg mob-action-btn"},I={__name:"CreateUserPage",setup(e){(0,s.RC)((()=>Promise.all([a.e(736),a.e(64)]).then(a.bind(a,2742))));const{errors:l,serverValidationError:o}=(0,b.Z)(),n=(0,u.H)();n.fetchUserTypeList();const I=(0,h.tv)(),M=(0,h.yj)(),B=(0,i.iH)(!1),G=(0,f.t)(),O=((0,s.Fl)((()=>G.isSuperUser)),(0,s.Fl)((()=>n.getUserType))),J=((0,i.iH)(null),(0,i.iH)([]),(0,i.iH)(""),(0,i.iH)("a-z,A-Z,0-9,#"),(0,i.iH)(12),(0,i.iH)("")),K=(0,i.iH)(""),X=(0,i.iH)(""),Y=(0,i.iH)(""),ee=(0,i.iH)("");function le(){const e=new g(/[A-Z]{1}/gm).gen(),l=new g(/[a-z]{3,5}/gm).gen(),a=new g(/[@#$%^&*!]{1}/gm).gen(),s=new g(/[0-9]{3,5}/gm).gen();ee.value=e+l+a+s,(0,d.Z)(ee.value)}const ae=(0,i.iH)(null),se=(0,i.iH)(null),re=((0,i.iH)([]),(0,i.iH)("")),te=(0,i.iH)("");function ie(){re.value.click()}async function oe(e){p.Z.show({spinner:v.Z,message:"Loading..."});const l=e.target.files[0],a=new FileReader;a.onloadend=()=>{te.value=a.result,p.Z.hide()},a.readAsDataURL(l)}function ne(){history.go(-1)}async function de(){p.Z.show({message:"Loading...",spinner:v.Z});const e=new FormData;if(e.append("user_type_id",J.value.value),e.append("first_name",K.value),e.append("last_name",X.value),e.append("email",Y.value),ee.value&&e.append("password",ee.value),te.value){const l=await fetch(te.value),a=await l.blob(),s=new File([a],"image.png");e.append("avtar",s,"image.png")}"edit-user"==M.name?n.updateUser(e,se.value).then((e=>{1==e.success?(c["default"].success(e.message?e.message:"User Edited Successfully !"),I.push({name:"user-dashboard"}),p.Z.hide()):0==e.success&&(c["default"].error(e.message),p.Z.hide())})).finally((()=>{p.Z.hide()})):n.saveNewUser(e).then((e=>{1==e.success?(c["default"].success(e.message?e.message:"User Edited Successfully !"),I.push({name:"user-dashboard"}),p.Z.hide()):(console.log(e),l.value=e.errors)})).catch((e=>{e.response&&(l.value=e.response.data.errors)})).finally((()=>{p.Z.hide()}))}return"edit-user"==M.name&&(p.Z.show({message:"Loading...",spinner:v.Z}),ae.value=M.params.slug,_.Z.get(_.Z.resolveApiUrl(m.xR.SHOW,{id:ae.value})).then((e=>{1==e.success?(se.value=e.data[0].id,J.value={label:e.data[0].usertype.name,value:e.data[0].usertype.id},K.value=e.data[0].first_name,X.value=e.data[0].last_name,Y.value=e.data[0].email,te.value=e.data[0].avtar,p.Z.hide()):0==e.success&&(c["default"].error(e.message),p.Z.hide())})).catch((e=>{console.log(e),p.Z.hide()})).finally((()=>{B.value=!0,p.Z.hide()}))),(0,s.bv)((()=>{"edit-user"!==M.name&&(B.value=!0)})),(e,a)=>{const n=(0,s.up)("q-btn"),d=(0,s.up)("q-select"),m=(0,s.up)("q-input"),u=(0,s.up)("q-form");return(0,s.wg)(),(0,s.j4)(u,{onSubmit:a[6]||(a[6]=(0,r.iM)((e=>de()),["prevent"]))},{default:(0,s.w5)((()=>[(0,s._)("div",q,[(0,s._)("section",U,[(0,s._)("div",Z,[(0,s._)("h3",w,(0,t.zw)(ae.value?"Update":"Create")+" User",1)]),(0,s._)("div",y,[(0,s._)("div",S,[(0,s._)("div",H,[(0,s._)("div",V,[te.value?((0,s.wg)(),(0,s.iD)("img",{key:0,src:te.value,alt:"user"},null,8,k)):((0,s.wg)(),(0,s.iD)("img",C))]),(0,s._)("div",W,[(0,s._)("input",{style:{display:"none"},ref_key:"imgInput",ref:re,type:"file",name:"image",accept:e.accept,onChange:oe},null,40,F),(0,s.Wm)(n,{color:"primary",icon:"las la-pen",class:"edit-pro-btn-avtar",onClick:(0,r.iM)(ie,["prevent"])},null,8,["onClick"])])])]),(0,s._)("div",x,[(0,s._)("div",T,[L,(0,s.Wm)(d,{outlined:"","hide-bottom-space":"",dense:e.dense,class:"q-ml-sm q-mr-sm",modelValue:J.value,"onUpdate:modelValue":a[0]||(a[0]=e=>J.value=e),options:(0,i.SU)(O),error:(0,i.SU)(l).length>0,"error-message":(0,i.SU)(o)((0,i.SU)(l),"user_type_id")},null,8,["dense","modelValue","options","error","error-message"])]),(0,s._)("div",E,[Q,(0,s.Wm)(m,{outlined:"","hide-bottom-space":"",modelValue:K.value,"onUpdate:modelValue":a[1]||(a[1]=e=>K.value=e),dense:e.dense,class:"q-ml-sm q-mr-sm",rules:[l=>e.required(l,"First Name")],error:(0,i.SU)(l).length>0,"error-message":(0,i.SU)(o)((0,i.SU)(l),"first_name")},null,8,["modelValue","dense","rules","error","error-message"])]),(0,s._)("div",D,[N,(0,s.Wm)(m,{outlined:"","hide-bottom-space":"",modelValue:X.value,"onUpdate:modelValue":a[2]||(a[2]=e=>X.value=e),dense:e.dense,placeholder:e.$q.lang.user.edit_profile.name.placeHolder,rules:[l=>e.required(l,"Last Name")],error:(0,i.SU)(l).length>0,"error-message":(0,i.SU)(o)((0,i.SU)(l),"last_name"),class:"q-ml-sm q-mr-sm"},null,8,["modelValue","dense","placeholder","rules","error","error-message"])]),(0,s._)("div",P,[A,(0,s.Wm)(m,{outlined:"","hide-bottom-space":"",modelValue:Y.value,"onUpdate:modelValue":a[3]||(a[3]=e=>Y.value=e),dense:e.dense,class:"q-ml-sm q-mr-sm",rules:[l=>e.required(l,"Email"),l=>e.isEmail(l)],error:(0,i.SU)(l).length>0,"error-message":(0,i.SU)(o)((0,i.SU)(l),"email")},null,8,["modelValue","dense","rules","error","error-message"])]),ae.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",R,[(0,s._)("div",$,[z,(0,s.Wm)(n,{label:"Generate",onClick:a[4]||(a[4]=e=>le())})]),(0,s.Wm)(m,{outlined:"","hide-bottom-space":"",modelValue:ee.value,"onUpdate:modelValue":a[5]||(a[5]=e=>ee.value=e),dense:e.dense,rules:[l=>e.required(l,"Password"),l=>e.validatePassword(l)],error:(0,i.SU)(l).length>0,"error-message":(0,i.SU)(o)((0,i.SU)(l),"password"),class:"q-ml-sm q-mr-sm"},null,8,["modelValue","dense","rules","error","error-message"])]))]),(0,s._)("div",j,[(0,s.Wm)(n,{outline:"",onClick:ne,color:"primary",label:e.$q.lang.user.edit_profile.cancel_btn,class:"edit-pro-btn"},null,8,["label"]),(0,s.Wm)(n,{color:"primary",label:e.$q.lang.user.edit_profile.submit_btn,type:"submit",class:"edit-pro-btn q-ml-sm"},null,8,["label"])])])])])])),_:1})}}};var M=a(8326),B=a(4455),G=a(2517),O=a(6611),J=a(7580),K=a(8149),X=a(9984),Y=a.n(X);const ee=I,le=ee;Y()(I,"components",{QForm:M.Z,QBtn:B.Z,QSelect:G.Z,QInput:O.Z,QTable:J.Z,QField:K.Z})},205:(e,l,a)=>{e.exports=a.p+"img/user-avtart-img.f9e2707e.png"}}]);