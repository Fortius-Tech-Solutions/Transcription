"use strict";(globalThis["webpackChunkTranscription"]=globalThis["webpackChunkTranscription"]||[]).push([[343],{8147:(a,l,e)=>{e.r(l),e.d(l,{default:()=>R});e(9665);var i=e(9835),s=e(499),n=e(6970),o=(e(826),e(4016)),t=e(8853),u=e(8339),d=e(5531),c=e(6950),r=e(9120),_=e(4170),m=e(3703),p=(e(3878),e(3129)),v=e.n(p);const g={class:"q-pa-md main-wrapper"},f={class:"datefilter_box"},w=(0,i._)("div",{class:"audio_list_head"},[(0,i._)("div",{class:"col1"},[(0,i._)("div",{class:"td_col1"},"Audio Name"),(0,i._)("div",{class:"td_col2"},"Patient Name"),(0,i._)("div",{class:"td_col3"},"Hospital Name")]),(0,i._)("div",{class:"col2"},"Action")],-1),h={class:"audio_list_body"},y={class:"audio_list_item"},k={class:"audio_list_col1"},b={class:"audioplayer_col"},Z=(0,i._)("span",{class:"play_icon"},[(0,i._)("i",{class:"las la-play"})],-1),q={class:"audio_info"},D={class:"audio_heading"},C={class:"audio_meta"},L={class:"audio_meta_list"},j={class:"audo_patient_name"},H={class:"audo_hospital_name"},P={class:"audio_list_action"},S={class:"text-center"},U=(0,i._)("i",{class:"las la-exclamation-triangle"},null,-1),Y=(0,i._)("h5",null,"Data Not Found",-1),W={class:"row justify-center q-my-md"},Q={style:{display:"none"}},V={__name:"audioList",setup(a){const l=(0,i.RC)((()=>e.e(979).then(e.bind(e,7979)))),p=(0,u.tv)(),V=(0,u.yj)(),z=(0,s.iH)(!1),A=(0,s.iH)([]),F=(0,s.iH)(!1),T=(0,s.iH)(null),x=(0,d.b)();c.Z.show({spinner:r.Z,message:"Loading..."});const I=(0,i.Fl)((()=>x.getAudioList)),M=(0,s.iH)(null),N=(0,s.iH)(1),E=(0,s.iH)(6),B=(0,s.iH)(!0);function R(){const a={from_date:T.value?.from,to_date:T.value?.to,limit:E.value,page:N.value,userId:V.params.slug.split("/")[0],statusId:V.params.slug.split("/")[1]};return x.fetchAudioList(a)}function $(a,l){R().then((a=>{a.success&&a.data.data.length>0?(N.value=N.value+1,l()):(B.value=!1,l(!0))})).catch((a=>{l(!0)})).finally((()=>{c.Z.hide()}))}function K(a){x.draft=a.draft,x.data=a,m.Z.set("data",a),p.push({name:"write-script",params:{slug:a.id}})}function G(a){c.Z.show({spinner:r.Z,message:"Loading..."}),o.Z.post(o.Z.resolveApiUrl(t.jU.SAVE,{id:a.id}),{status_id:"4"}).then((l=>{I.value.forEach(((l,e,i)=>{l.id==a.id&&(l.name="Published")}))})).catch((a=>{console.log(a)})).finally((()=>{c.Z.hide()}))}async function J(a){c.Z.show({message:"Loading...",spinner:r.Z}),z.value=!0,O(a)}async function O(a){A.value.push(a),setTimeout((()=>{X(document.getElementById("downloadPDF")),c.Z.hide()}),4e3)}function X(a){v()(a,{margin:0,filename:`${A.value[0].patient_name}_${_.ZP.formatDate(A.value[0].date_of_service,"DD-MM-YYYY")}.pdf`,image:{type:"jpeg",quality:.98},html2canvas:{scale:1,letterRendering:!0},jsPDF:{unit:"in",format:"a4",orientation:"portrait"}})}function aa(){c.Z.show({spinner:r.Z,message:"Loading..."}),N.value=1,B.value=!0,x.audioList=[],$()}function la(){c.Z.show({spinner:r.Z,message:"Loading..."}),T.value=null,x.audioList=[],N.value=1,B.value=!0,M.value.reset(),M.value.resume(),M.value.trigger()}return(0,u.iS)(((a,l,e)=>{console.log("leave"),x.resetList(),e()})),(a,e)=>{const o=(0,i.up)("q-btn"),t=(0,i.up)("q-card"),u=(0,i.up)("q-spinner-dots"),d=(0,i.up)("q-infinite-scroll"),c=(0,i.up)("q-date"),r=(0,i.up)("q-dialog"),m=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",g,[(0,i._)("div",f,[(0,i.Wm)(o,{color:"primary",onClick:e[0]||(e[0]=a=>F.value=!0),label:T.value?.from?T.value.from+" to "+T.value.to:T.value??"Select Date"},null,8,["label"]),T.value?((0,i.wg)(),(0,i.j4)(o,{key:0,onClick:la,icon:"la la-times"})):(0,i.kq)("",!0)]),(0,i.Wm)(d,{onLoad:$,offset:250,"scroll-target":"body",ref_key:"scrollList",ref:M},{loading:(0,i.w5)((()=>[(0,i._)("div",W,[(0,i.Wm)(u,{color:"primary",size:"40px"})])])),default:(0,i.w5)((()=>[0!==(0,s.SU)(I).length?((0,i.wg)(),(0,i.j4)(t,{key:0,class:"q-pa-lg"},{default:(0,i.w5)((()=>[w,(0,i._)("div",h,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,s.SU)(I),(a=>((0,i.wg)(),(0,i.iD)("div",{class:"audio_list_bg caption",key:a},[(0,i._)("div",y,[(0,i._)("div",k,[(0,i._)("div",b,[Z,(0,i._)("div",q,[(0,i._)("p",D,(0,n.zw)(a.audio_name),1),(0,i._)("div",C,[(0,i._)("ul",L,[(0,i._)("li",null,[(0,i.Uk)(" Duration: "),(0,i._)("b",null,(0,n.zw)(a.audio_duration),1)]),(0,i._)("li",null,[(0,i.Uk)(" Created at: "),(0,i._)("b",null,(0,n.zw)((0,s.SU)(_.ZP).formatDate(a.created_at,"DD-MM-YYYY")),1)])])])]),(0,i._)("div",j,[(0,i._)("p",null,[(0,i._)("b",null,(0,n.zw)(a.patient_name),1)])]),(0,i._)("div",H,[(0,i._)("p",null,(0,n.zw)(a.hospital_name),1)])])]),(0,i._)("div",P,["Published"==a.name?((0,i.wg)(),(0,i.j4)(o,{key:0,round:"",color:"primary",icon:"las la-download",class:"q-ml-sm",padding:"sm",onClick:l=>J(a)},null,8,["onClick"])):(0,i.kq)("",!0),"Confirmed"==a.name?((0,i.wg)(),(0,i.j4)(o,{key:1,color:"green",label:"Publish",class:"q-ml-sm",onClick:l=>G(a)},null,8,["onClick"])):(0,i.kq)("",!0),(0,i.Wm)(o,{round:"",color:"secondary",icon:"las la-edit",class:"q-ml-sm",padding:"sm",disable:"Pending"!==a.name,onClick:l=>K(a)},null,8,["disable","onClick"])])])])))),128))])])),_:1})):B.value?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(t,{key:1,class:"q-pa-lg"},{default:(0,i.w5)((()=>[(0,i._)("div",S,[(0,i.Wm)(o,{class:"not_found_icon",outline:"",color:"primary"},{default:(0,i.w5)((()=>[U])),_:1}),Y])])),_:1}))])),_:1},512)]),(0,i._)("div",Q,[z.value?((0,i.wg)(),(0,i.j4)((0,s.SU)(l),{key:0,items:A.value,id:"downloadPDF"},null,8,["items"])):(0,i.kq)("",!0)]),(0,i.Wm)(r,{modelValue:F.value,"onUpdate:modelValue":e[2]||(e[2]=a=>F.value=a)},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{modelValue:T.value,"onUpdate:modelValue":e[1]||(e[1]=a=>T.value=a),range:""},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(o,{label:"Submit",onClick:aa,type:"submit",color:"primary"},null,512),[[m]])])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])],64)}}};var z=e(8879),A=e(6870),F=e(4458),T=e(7501),x=e(3706),I=e(6711),M=e(2146),N=e(9984),E=e.n(N);const B=V,R=B;E()(V,"components",{QBtn:z.Z,QInfiniteScroll:A.Z,QCard:F.Z,QSpinnerDots:T.Z,QDialog:x.Z,QDate:I.Z}),E()(V,"directives",{ClosePopup:M.Z})}}]);