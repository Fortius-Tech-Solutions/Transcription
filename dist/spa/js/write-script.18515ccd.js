"use strict";(globalThis["webpackChunkTranscription"]=globalThis["webpackChunkTranscription"]||[]).push([[630],{8457:(e,l,a)=>{a.r(l),a.d(l,{default:()=>se});a(9665);var s=a(9835),o=a(6970),t=a(499),r=a(826),i=a(9587),n=a(6950),u=a(9120),d=a(4170),m=a(2057),c=a(8339),p=a(5531),v=a(8853),f=a(4016),b=a(5676),_=a(6928),g=a(1410);const h={class:"home_user_header"},y={class:"comman-title"},S={class:"q-pa-md main-wrapper"},U={class:"bg-box"},Z=(0,s._)("label",{for:""}," Patient Name",-1),q={key:0,class:"q-mt-md"},T=(0,s._)("label",{for:""},"Enter Other Type",-1),V={class:"btn_input_box"},w={class:"q-mt-lg"},C=(0,s._)("label",{for:""},"Gender",-1),k={class:"q-gutter-sm"},D={class:"q-mb-md q-mt-md"},W=(0,s._)("label",{class:"q-mr-md",for:""},"Date of Service",-1),N={class:"q-mt-lg"},H=(0,s._)("label",{for:""},"Transcription",-1),Q={autocorrect:"on",autocapitalize:"off",autocomplete:"off",spellcheck:"true"},P={class:"q-mt-lg"},R=(0,s._)("label",{for:""},"Extra Transcription",-1),F={autocorrect:"on",autocapitalize:"off",autocomplete:"off",spellcheck:"true"},x={class:"q-mt-lg"},E=(0,s._)("label",{for:""}," Comment",-1),L={class:"form_comon_btn q-mt-md q-mr-md q-mb-md"},M={key:0,class:"form_comon_btn q-mt-md q-mr-md q-mb-md"},Y={__name:"writeScript",setup(e){const l=(0,c.tv)(),a=(0,c.yj)(),Y=((0,t.iH)(""),(0,t.iH)(!1)),j=(0,t.iH)(null),z=(0,p.b)(),A=(0,_.t)(),B=(0,b.z)(),{errors:I,serverValidationError:O}=(0,m.Z)(),G=(0,s.Fl)((()=>z.getTsTypeList)),J=(0,s.Fl)((()=>"confirm-script"==l.currentRoute.value.name?B.getData:z.getData)),K=(0,t.iH)(null),X=(0,t.iH)(J.value.patient_name),$=(0,t.iH)(null),ee=(0,t.iH)(null),le=(0,t.iH)(null),ae=(0,t.iH)(null),se=(0,t.iH)(null),oe=(0,t.iH)(""),te=(0,s.Fl)((()=>A.getUser)),re=(0,s.Fl)((()=>z.getDraftStatus));function ie(){f.Z.get(f.Z.resolveApiUrl(v.jU.SAVE,{id:a.params.slug})).then((e=>{1==e.success?(K.value={label:e.data[0].TSType_name??e.data[0].trascript_types.name,value:e.data[0].TSType_id??e.data[0].trascript_types.id},X.value=e.data[0].patient_name,$.value=e.data[0].gender,ee.value=e.data[0].transcription,le.value=e.data[0].cc_mail,ae.value=e.data[0].comment,j.value=e.data[0].date_of_service,n.Z.hide()):0==e.success&&(i["default"].error(e.message),n.Z.hide(),I.value=e.errors)})).catch((e=>{e.response&&(I.value=e.response.data.errors),console.log(e),n.Z.hide()})).finally((()=>{n.Z.hide()}))}function ne(e){n.Z.show({message:"Loading...",spinner:u.Z});const s={patient_name:X.value,gender:$.value,transcription:ee.value,cc_mail:le.value,TSType_id:K?.value?.value,date_of_service:j.value,comment:ae.value};"Draft"===e&&(s.draft=1),"confirm-script"==l.currentRoute.value.name?(console.log(se,this.data),s.id=a.params.slug,B.saveDoctor(s,a.params.slug).then((e=>{1==e.success?(i["default"].success(e.message?e.message:"Transcription Created Successfully !"),history.go(-1),n.Z.hide()):0==e.success&&(i["default"].error(e.message),n.Z.hide())})).finally((()=>{n.Z.hide()}))):z.saveTranscription(s,a.params.slug).then((e=>{1==e.success?(i["default"].success(e.message?e.message:"Transcription Created Successfully !"),history.go(-1),n.Z.hide()):0==e.success&&(i["default"].error(e.message),n.Z.hide())})).finally((()=>{n.Z.hide()}))}(0,s.bv)((()=>{n.Z.show({message:"Loading...",spinner:u.Z}),z.fetchTsType().finally((()=>{n.Z.hide()}))})),1==re.value?(n.Z.show({message:"Loading...",spinner:u.Z}),ie()):"confirm-script"==l.currentRoute.value.name&&(X.value=J.value.patient_name,$.value=J.value.gender,ee.value=J.value.transcription,le.value=J.value.cc_mail,ae.value=J.value.comment,j.value=J.value.date_of_service,K.value={label:J.value.TSType_name,value:J.value.TSType_id});const ue=(0,g.T)();function de(){ue.pdfData=J.value,l.push({name:"transcription-pdf"})}function me(){const e={user_id:te.value.id,hospital_id:J.value.hospital_id,status_id:"3",patient_name:X.value,comment:ae.value,gender:$.value,transcription:ee.value,cc_mail:le.value,TSType_id:K.value.value,date_of_service:j.value};f.Z.post(f.Z.resolveApiUrl(v.PZ.CONFIRM,{id:a.params.slug}),e).then((e=>{e.success&&history.go(-2)}))}function ce(e){return e<=d.ZP.formatDate(Date.now(),"YYYY/MM/DD")}function pe(){n.Z.show({message:"Loading...",spinner:u.Z});const e={name:oe.value};f.Z.post("writer/add-ts-type",e).then((e=>{e.success&&(z.tsType=[],z.fetchTsType(),K.value="")})).finally((()=>{n.Z.hide()}))}function ve(){j.value=null}function fe(){history.go(-1)}return(0,c.iS)(((e,l,a)=>{z.resetList(),B.resetList(),a()})),(e,a)=>{const i=(0,s.up)("q-input"),n=(0,s.up)("q-select"),u=(0,s.up)("q-btn"),d=(0,s.up)("q-radio"),m=(0,s.up)("q-editor"),c=(0,s.up)("q-form"),p=(0,s.up)("q-date"),v=(0,s.up)("q-dialog"),f=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",h,[(0,s._)("h3",y,(0,o.zw)("confirm-script"!==(0,t.SU)(l).currentRoute.value.name?"Create":"Confirm")+" Transcription ",1)]),(0,s.Wm)((0,t.SU)(r.Z),{ref_key:"audioRef",ref:se,option:{src:(0,t.SU)(J).audio_filepath,title:(0,t.SU)(J).audio_name,coverImage:"",coverRotate:"",progressBarColor:"",indicatorColor:"",autoplay:!1}},null,8,["option"]),(0,s.Wm)(c,null,{default:(0,s.w5)((()=>[(0,s._)("div",S,[(0,s._)("div",U,[Z,(0,s.Wm)(i,{outlined:"",modelValue:X.value,"onUpdate:modelValue":a[0]||(a[0]=e=>X.value=e),dense:e.dense,placeholder:"Please Enter Patient Name",disable:(0,t.SU)(J).isNew,class:"create-user-field-box",rules:[l=>e.required(l,"Patient Name")],error:(0,t.SU)(I).length>0,"error-message":(0,t.SU)(O)((0,t.SU)(I),"Patient Name")},null,8,["modelValue","dense","disable","rules","error","error-message"]),(0,s.Wm)(n,{modelValue:K.value,"onUpdate:modelValue":a[1]||(a[1]=e=>K.value=e),options:(0,t.SU)(G),dense:e.dense,class:"select_drop",outlined:"","hide-bottom-space":"",label:"Select Type",disable:(0,t.SU)(J).isNew},null,8,["modelValue","options","dense","disable"]),"other"==K.value?.value?((0,s.wg)(),(0,s.iD)("div",q,[T,(0,s._)("div",V,[(0,s.Wm)(i,{modelValue:oe.value,"onUpdate:modelValue":a[2]||(a[2]=e=>oe.value=e),dense:e.dense,outlined:"",type:"text"},null,8,["modelValue","dense"]),(0,s.Wm)(u,{class:"q-ml-md",color:"primary",label:"Add Type",onClick:pe})])])):(0,s.kq)("",!0),(0,s._)("div",w,[C,(0,s._)("div",k,[(0,s.Wm)(d,{modelValue:$.value,"onUpdate:modelValue":a[3]||(a[3]=e=>$.value=e),val:"male",label:"Male",disable:(0,t.SU)(J).isNew},null,8,["modelValue","disable"]),(0,s.Wm)(d,{modelValue:$.value,"onUpdate:modelValue":a[4]||(a[4]=e=>$.value=e),val:"female",label:"Female",disable:(0,t.SU)(J).isNew},null,8,["modelValue","disable"]),(0,s.Wm)(d,{modelValue:$.value,"onUpdate:modelValue":a[5]||(a[5]=e=>$.value=e),val:"other",label:"Don't want to Disclose",disable:(0,t.SU)(J).isNew},null,8,["modelValue","disable"])])]),(0,s._)("div",D,[W,(0,s.Wm)(u,{color:"primary",icon:"las la-calendar",onClick:a[6]||(a[6]=e=>Y.value=!0),label:j.value??"Select Date",disable:(0,t.SU)(J).isNew},null,8,["label","disable"]),j.value?((0,s.wg)(),(0,s.j4)(u,{key:0,onClick:ve,icon:"la la-times"})):(0,s.kq)("",!0)]),(0,s._)("div",N,[H,(0,s._)("form",Q,[(0,s.Wm)(m,{modelValue:ee.value,"onUpdate:modelValue":a[7]||(a[7]=e=>ee.value=e),dense:e.dense,definitions:{bold:{label:"Bold",icon:null,tip:"My bold tooltip"}},rules:[l=>e.required(l,"Transcription")],error:(0,t.SU)(I).length>0,"error-message":(0,t.SU)(O)((0,t.SU)(I),"Transcription"),disable:(0,t.SU)(J).isNew},null,8,["modelValue","dense","rules","error","error-message","disable"])])]),(0,s._)("div",P,[R,(0,s._)("form",F,[(0,s.Wm)(m,{modelValue:le.value,"onUpdate:modelValue":a[8]||(a[8]=e=>le.value=e),dense:e.dense,definitions:{bold:{label:"Bold",icon:null,tip:"My bold tooltip"}},disable:(0,t.SU)(J).isNew},null,8,["modelValue","dense","disable"])])]),(0,s._)("div",x,[E,(0,s.Wm)(i,{type:"textarea",outlined:"",modelValue:ae.value,"onUpdate:modelValue":a[9]||(a[9]=e=>ae.value=e),dense:e.dense,placeholder:"Please Enter Comment",disable:(0,t.SU)(J).isNew||"Doctor"==(0,t.SU)(te).usertype.name,class:"create-user-field-box",rules:[l=>e.required(l,"Comment")],error:(0,t.SU)(I).length>0,"error-message":(0,t.SU)(O)((0,t.SU)(I),"Comment")},null,8,["modelValue","dense","disable","rules","error","error-message"])])]),(0,s._)("div",L,[(0,s.Wm)(u,{outline:"",color:"primary",label:"Cancel",onClick:fe}),(0,s.Wm)(u,{outline:"",color:"primary",class:"q-ml-md",label:"Preview",onClick:de}),(0,s.Wm)(u,{color:"primary",label:"Save as Draft",class:"q-ml-md",onClick:a[10]||(a[10]=e=>ne("Draft"))}),"confirm-script"!=(0,t.SU)(l).currentRoute.value.name?((0,s.wg)(),(0,s.j4)(u,{key:0,color:"primary",label:"Save & Confirmed",class:"q-ml-md",onClick:a[11]||(a[11]=e=>ne("Confirmed"))})):(0,s.kq)("",!0)]),"confirm-script"==(0,t.SU)(l).currentRoute.value.name?((0,s.wg)(),(0,s.iD)("div",M,[(0,s.Wm)(u,{color:"primary",label:"Confirmed",class:"q-ml-md",onClick:a[12]||(a[12]=e=>me())})])):(0,s.kq)("",!0)])])),_:1}),(0,s.Wm)(v,{modelValue:Y.value,"onUpdate:modelValue":a[14]||(a[14]=e=>Y.value=e)},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{modelValue:j.value,"onUpdate:modelValue":a[13]||(a[13]=e=>j.value=e),options:ce},{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(u,{label:"Submit",color:"primary"},null,512),[[f]])])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])],64)}}};var j=a(8326),z=a(6611),A=a(2259),B=a(8879),I=a(1480),O=a(8018),G=a(3706),J=a(6711),K=a(1463),X=a(8149),$=a(2146),ee=a(9984),le=a.n(ee);const ae=Y,se=ae;le()(Y,"components",{QForm:j.Z,QInput:z.Z,QSelect:A.Z,QBtn:B.Z,QRadio:I.Z,QEditor:O.Z,QDialog:G.Z,QDate:J.Z,QTable:K.Z,QField:X.Z}),le()(Y,"directives",{ClosePopup:$.Z})}}]);