(globalThis["webpackChunkTranscription"]=globalThis["webpackChunkTranscription"]||[]).push([[620],{192:(e,l,a)=>{"use strict";a.r(l),a.d(l,{default:()=>me});a(9665);var s=a(9835),r=a(1957),t=a(6970),i=a(499),o=a(205),d=a.n(o),n=(a(796),a(5054)),m=a(8853),u=a(4577),c=a(9587),p=a(6950),v=a(9120),g=a(1910),b=a(2057),h=a(8339),f=a(4016),q=a(6928);const _={class:"container"},U={class:"profile-sec q-mb-md"},y={class:"home_user_header"},w={class:"comman-title"},S={class:"q-pa-md main-wrapper"},Z={class:"profile-card"},H={class:"text-center"},k={class:"profile-head edit-pro-head mob-pro-head"},V={class:"profile-avtar"},W=["src"],x={key:1,src:d(),alt:""},C={class:"avtar-edit-icon"},F=["accept"],D={class:"row q-col-gutter-lg q-mt-sm edit-avtar-field"},L={class:"col-md-6 col-sm-12 col-12 edit-field mob-edit-pa"},T=(0,s._)("label",{class:"lable-text q-mb-sm q-ml-sm q-mr-sm"},"Select User Type",-1),Q={class:"col-md-6 col-sm-12 col-12 edit-field mob-edit-pa"},A=(0,s._)("label",{class:"lable-text q-mb-sm q-ml-sm q-mr-sm"},"First Name",-1),E={class:"col-md-6 col-sm-12 col-12 edit-field mob-edit-pa"},R=(0,s._)("label",{class:"lable-text q-mb-sm q-ml-sm q-mr-sm"},"Last Name",-1),N={class:"col-md-6 col-sm-12 col-12 edit-field mob-edit-pa"},P=(0,s._)("label",{class:"lable-text q-mb-sm q-ml-sm q-mr-sm"},"Email",-1),$={key:0,class:"col-md-6 col-sm-12 col-12 edit-field mob-edit-pa mob_digit"},j={class:"pass-feild"},z=(0,s._)("label",{class:"lable-text q-mb-sm q-ml-sm q-mr-sm",for:""},"Password ",-1),I={key:1},M={class:"col-md-6 col-sm-12 col-12 edit-field mob-edit-pa"},B=(0,s._)("label",{class:"lable-text q-mb-sm q-ml-sm q-mr-sm"},"Specialty",-1),G={class:"col-md-3 col-sm-12 col-12 edit-field mob-edit-pa q-mt-xl"},O={class:"uploder_box"},J={key:0,class:"uploaded_img"},K=["src"],X={class:"text-right q-pt-lg mob-action-btn"},Y={__name:"CreateUserPage",setup(e){(0,s.RC)((()=>Promise.all([a.e(736),a.e(64)]).then(a.bind(a,7390))));const{errors:l,serverValidationError:o}=(0,b.Z)(),d=(0,u.H)();d.fetchUserTypeList();const Y=(0,h.tv)(),ee=(0,h.yj)(),le=(0,i.iH)(!1),ae=(0,q.t)(),se=((0,s.Fl)((()=>ae.isSuperUser)),(0,s.Fl)((()=>d.getUserType))),re=((0,i.iH)(null),(0,i.iH)([]),(0,i.iH)(""),(0,i.iH)("a-z,A-Z,0-9,#"),(0,i.iH)(12),(0,i.iH)("")),te=(0,i.iH)(""),ie=(0,i.iH)(""),oe=(0,i.iH)(""),de=(0,i.iH)(""),ne=(0,i.iH)(""),me=(0,i.iH)("");function ue(){const e=new g(/[A-Z]{1}/gm).gen(),l=new g(/[a-z]{3,5}/gm).gen(),a=new g(/[@#$%^&*!]{1}/gm).gen(),s=new g(/[0-9]{3,5}/gm).gen();de.value=e+l+a+s,(0,n.Z)(de.value)}const ce=(0,i.iH)(null),pe=(0,i.iH)(null),ve=((0,i.iH)([]),(0,i.iH)("")),ge=(0,i.iH)("");function be(){ve.value.click()}async function he(e){p.Z.show({spinner:v.Z,message:"Loading..."});const l=e.target.files[0],a=new FileReader;a.onloadend=()=>{ge.value=a.result,p.Z.hide()},a.readAsDataURL(l)}const fe=(e,l)=>{console.log(e),e.forEach((e=>{const a=new FileReader;a.onload=e=>{"sign"==l&&(me.value=e.target.result),console.log(e.target.result)},a.readAsDataURL(e)}))};function qe(){history.go(-1)}"edit-user"==ee.name&&(p.Z.show({message:"Loading...",spinner:v.Z}),ce.value=ee.params.slug,f.Z.get(f.Z.resolveApiUrl(m.xR.SHOW,{id:ce.value})).then((e=>{1==e.success?(pe.value=e.data[0].id,re.value={label:e.data[0].usertype.name,value:e.data[0].usertype.id},te.value=e.data[0].first_name,ie.value=e.data[0].last_name,oe.value=e.data[0].email,ge.value=e.data[0].avtar,ne.value=e.data[0].speciality,me.value=e.data[0].signature,p.Z.hide()):0==e.success&&(c["default"].error(e.message),p.Z.hide())})).catch((e=>{console.log(e),p.Z.hide()})).finally((()=>{le.value=!0,p.Z.hide()}))),(0,s.bv)((()=>{"edit-user"!==ee.name&&(le.value=!0)}));const _e=e=>{"sign"==e&&(me.value="")};async function Ue(){p.Z.show({message:"Loading...",spinner:v.Z});const e=new FormData;if(e.append("user_type_id",re.value.value),e.append("first_name",te.value),e.append("last_name",ie.value),e.append("email",oe.value),de.value&&e.append("password",de.value),ge.value?.startsWith("https://"))e.append("avtar",ge.value);else if(ge.value){const l=await fetch(ge.value),a=await l.blob(),s=new File([a],"profile");e.append("avtar",s,"profile")}else e.append("avtar","");if(2==re.value.value)if(e.append("speciality",ne.value),me.value?.startsWith("https://"))e.append("signature",me.value);else if(me.value){const l=await fetch(me.value),a=await l.blob(),s=new File([a],"signature");e.append("signature",s,"signature")}else e.append("signature","");"edit-user"==ee.name?d.updateUser(e,pe.value).then((e=>{1==e.success?(c["default"].success(e.message?e.message:"User Edited Successfully !"),Y.push({name:"user-dashboard"}),p.Z.hide()):0==e.success&&(c["default"].error(e.message),p.Z.hide())})).finally((()=>{p.Z.hide()})):d.saveNewUser(e).then((e=>{1==e.success?(c["default"].success(e.message?e.message:"User Created Successfully !"),Y.push({name:"user-dashboard"}),p.Z.hide()):(console.log(e),l.value=e.errors)})).catch((e=>{e.response&&(l.value=e.response.data.errors)})).finally((()=>{p.Z.hide()}))}return(e,a)=>{const d=(0,s.up)("q-btn"),n=(0,s.up)("q-select"),m=(0,s.up)("q-input"),u=(0,s.up)("q-uploader"),c=(0,s.up)("q-form");return(0,s.wg)(),(0,s.j4)(c,{onSubmit:a[9]||(a[9]=(0,r.iM)((e=>Ue()),["prevent"]))},{default:(0,s.w5)((()=>[(0,s._)("div",_,[(0,s._)("section",U,[(0,s._)("div",y,[(0,s._)("h3",w,(0,t.zw)(ce.value?"Update":"Create")+" User",1)]),(0,s._)("div",S,[(0,s._)("div",Z,[(0,s._)("div",H,[(0,s._)("div",k,[(0,s._)("div",V,[ge.value?((0,s.wg)(),(0,s.iD)("img",{key:0,src:ge.value,alt:"user"},null,8,W)):((0,s.wg)(),(0,s.iD)("img",x))]),(0,s._)("div",C,[(0,s._)("input",{style:{display:"none"},ref_key:"imgInput",ref:ve,type:"file",name:"image",accept:e.accept,onChange:he},null,40,F),(0,s.Wm)(d,{color:"primary",icon:"las la-pen",class:"edit-pro-btn-avtar",onClick:(0,r.iM)(be,["prevent"])},null,8,["onClick"])])])]),(0,s._)("div",D,[(0,s._)("div",L,[T,(0,s.Wm)(n,{outlined:"","hide-bottom-space":"",dense:e.dense,class:"q-ml-sm q-mr-sm",modelValue:re.value,"onUpdate:modelValue":a[0]||(a[0]=e=>re.value=e),options:(0,i.SU)(se),error:(0,i.SU)(l).length>0,"error-message":(0,i.SU)(o)((0,i.SU)(l),"user_type_id")},null,8,["dense","modelValue","options","error","error-message"])]),(0,s._)("div",Q,[A,(0,s.Wm)(m,{outlined:"","hide-bottom-space":"",modelValue:te.value,"onUpdate:modelValue":a[1]||(a[1]=e=>te.value=e),dense:e.dense,class:"q-ml-sm q-mr-sm",rules:[l=>e.required(l,"First Name")],error:(0,i.SU)(l).length>0,"error-message":(0,i.SU)(o)((0,i.SU)(l),"first_name")},null,8,["modelValue","dense","rules","error","error-message"])]),(0,s._)("div",E,[R,(0,s.Wm)(m,{outlined:"","hide-bottom-space":"",modelValue:ie.value,"onUpdate:modelValue":a[2]||(a[2]=e=>ie.value=e),dense:e.dense,placeholder:e.$q.lang.user.edit_profile.name.placeHolder,rules:[l=>e.required(l,"Last Name")],error:(0,i.SU)(l).length>0,"error-message":(0,i.SU)(o)((0,i.SU)(l),"last_name"),class:"q-ml-sm q-mr-sm"},null,8,["modelValue","dense","placeholder","rules","error","error-message"])]),(0,s._)("div",N,[P,(0,s.Wm)(m,{outlined:"","hide-bottom-space":"",modelValue:oe.value,"onUpdate:modelValue":a[3]||(a[3]=e=>oe.value=e),dense:e.dense,class:"q-ml-sm q-mr-sm",rules:[l=>e.required(l,"Email"),l=>e.isEmail(l)],error:(0,i.SU)(l).length>0,"error-message":(0,i.SU)(o)((0,i.SU)(l),"email")},null,8,["modelValue","dense","rules","error","error-message"])]),ce.value?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("div",$,[(0,s._)("div",j,[z,(0,s.Wm)(d,{label:"Generate",onClick:a[4]||(a[4]=e=>ue())})]),(0,s.Wm)(m,{outlined:"","hide-bottom-space":"",modelValue:de.value,"onUpdate:modelValue":a[5]||(a[5]=e=>de.value=e),dense:e.dense,rules:[l=>e.required(l,"Password"),l=>e.validatePassword(l)],error:(0,i.SU)(l).length>0,"error-message":(0,i.SU)(o)((0,i.SU)(l),"password"),class:"q-ml-sm q-mr-sm"},null,8,["modelValue","dense","rules","error","error-message"])])),2==re.value.value?((0,s.wg)(),(0,s.iD)("span",I,[(0,s._)("div",M,[B,(0,s.Wm)(m,{outlined:"","hide-bottom-space":"",modelValue:ne.value,"onUpdate:modelValue":a[6]||(a[6]=e=>ne.value=e),dense:e.dense,placeholder:e.$q.lang.user.edit_profile.specialty.placeHolder,rules:[l=>e.required(l,"Specialty")],error:(0,i.SU)(l).length>0,"error-message":(0,i.SU)(o)((0,i.SU)(l),"specialty"),class:"q-ml-sm q-mr-sm"},null,8,["modelValue","dense","placeholder","rules","error","error-message"])]),(0,s._)("div",G,[(0,s._)("div",O,[me.value?((0,s.wg)(),(0,s.iD)("div",J,[(0,s.Wm)(d,{color:"primary",rounded:"",icon:"las la-times",class:"close",onClick:a[7]||(a[7]=e=>_e("sign"))}),(0,s._)("img",{src:me.value},null,8,K)])):((0,s.wg)(),(0,s.j4)(u,{key:1,color:"teal",label:"Signature Image",url:"",onAdded:a[8]||(a[8]=e=>fe(e,"sign"))}))])])])):(0,s.kq)("",!0)]),(0,s._)("div",X,[(0,s.Wm)(d,{outline:"",onClick:qe,color:"primary",label:e.$q.lang.user.edit_profile.cancel_btn,class:"edit-pro-btn"},null,8,["label"]),(0,s.Wm)(d,{color:"primary",label:e.$q.lang.user.edit_profile.submit_btn,type:"submit",class:"edit-pro-btn q-ml-sm"},null,8,["label"])])])])])])])),_:1})}}};var ee=a(8326),le=a(8879),ae=a(2259),se=a(6611),re=a(4343),te=a(1463),ie=a(8149),oe=a(9984),de=a.n(oe);const ne=Y,me=ne;de()(Y,"components",{QForm:ee.Z,QBtn:le.Z,QSelect:ae.Z,QInput:se.Z,QUploader:re.Z,QTable:te.Z,QField:ie.Z})},205:(e,l,a)=>{e.exports=a.p+"img/user-avtart-img.f9e2707e.png"}}]);